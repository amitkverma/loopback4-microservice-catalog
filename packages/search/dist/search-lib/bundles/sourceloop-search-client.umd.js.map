{"version":3,"file":"sourceloop-search-client.umd.js","sources":["../../../projects/search-lib/src/lib/types.ts","../../../projects/search-lib/src/lib/search/search.component.ts","../../../projects/search-lib/src/lib/search-lib.module.ts","../../../projects/search-lib/src/lib/lib-configuration.ts","../../../projects/search-lib/src/public-api.ts","../../../projects/search-lib/src/sourceloop-search-client.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\nimport {Observable} from 'rxjs';\n\nexport interface ISearchQuery {\n  match: string;\n  limit: number | null;\n  order: string | null;\n  limitByType: boolean | null;\n  offset: number | null;\n  sources: string[] | null;\n}\nexport interface IModel {\n  name: string;\n  displayName: string;\n  imageUrl?: string;\n}\nexport interface IReturnType {\n  rank: number;\n  source: string;\n}\nexport interface IDefaultReturnType extends IReturnType {\n  name: string;\n  description: string;\n}\n\nexport interface ISearchService<T extends IReturnType> {\n  searchApiRequest(\n    requestParameters: ISearchQuery,\n    saveInRecents: boolean,\n  ): Observable<T[]>;\n  recentSearchApiRequest?(): Observable<ISearchQuery[]>;\n}\n\n// cant use T extends IReturnType here\nexport const SEARCH_SERVICE_TOKEN: InjectionToken<ISearchService<IReturnType>> =\n  new InjectionToken<ISearchService<IReturnType>>('Search_Service_Token');\n\nexport type RecentSearchEvent = {\n  event: KeyboardEvent | Event;\n  keyword: string;\n  category: 'All' | IModel;\n};\n\nexport type ItemClickedEvent<T> = {\n  event: MouseEvent;\n  item: T;\n};\n\nexport type TypeEvent = {\n  event: Event;\n  input: string;\n};\n// IRequestParameters default values\nexport const DEFAULT_LIMIT = 20;\nexport const DEFAULT_LIMIT_TYPE = false;\nexport const DEFAULT_ORDER = [];\nexport const DEBOUNCE_TIME = 1000;\nexport const DEFAULT_OFFSET = 0;\nexport const DEFAULT_SAVE_IN_RECENTS = true;\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  PLATFORM_ID,\n  ViewChild,\n} from '@angular/core';\nimport {Configuration} from '../lib-configuration';\nimport {Subject} from 'rxjs';\nimport {debounceTime, tap} from 'rxjs/operators';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {\n  ISearchService,\n  IModel,\n  ISearchQuery,\n  SEARCH_SERVICE_TOKEN,\n  DEBOUNCE_TIME,\n  DEFAULT_LIMIT,\n  DEFAULT_LIMIT_TYPE,\n  DEFAULT_OFFSET,\n  DEFAULT_SAVE_IN_RECENTS,\n  DEFAULT_ORDER,\n  IReturnType,\n  RecentSearchEvent,\n  TypeEvent,\n  ItemClickedEvent,\n} from '../types';\nimport {isPlatformBrowser} from '@angular/common';\n\n@Component({\n  selector: 'sourceloop-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: SearchComponent,\n      multi: true,\n    },\n  ],\n})\nexport class SearchComponent<T extends IReturnType>\n  implements OnInit, OnDestroy, ControlValueAccessor\n{\n  searchBoxInput = '';\n  suggestionsDisplay = false;\n  categoryDisplay = false;\n  suggestions: T[] = [];\n  relevantSuggestions: T[] = [];\n  recentSearches: ISearchQuery[] = [];\n  category: IModel | 'All' = 'All';\n  observableForSearchRequest = new Subject<{input: string; event: Event}>();\n  @Input() config!: Configuration<T>;\n  // emitted when user clicks one of the suggested results (including recent search sugestions)\n  @Output() clicked = new EventEmitter<ItemClickedEvent<T>>();\n  @Output() searched = new EventEmitter<RecentSearchEvent>();\n  /* emitted when user makes search request (including recent search requests & requests made on change in category from dropdown)\n  In case of recent search Array of recent Search request result is emitted */\n\n  onChange!: (value: string | undefined) => void;\n  onTouched!: () => void;\n  disabled = false;\n\n  @ViewChild('searchInput') public searchInputElement!: ElementRef;\n\n  constructor(\n    @Inject(SEARCH_SERVICE_TOKEN)\n    private readonly searchService: ISearchService<T>,\n    @Inject(PLATFORM_ID) private readonly platformId: object,\n  ) {}\n\n  ngOnInit(): void {\n    this.observableForSearchRequest\n      .pipe(\n        tap(v => (this.suggestions = [])),\n        debounceTime(DEBOUNCE_TIME),\n      )\n      .subscribe((value: TypeEvent) => {\n        this.searched.emit({\n          event: value.event,\n          keyword: value.input,\n          category: this.category,\n        });\n        this.getSuggestions(value);\n      });\n  }\n\n  // ControlValueAccessor Implementation\n  writeValue(value: string): void {\n    this.searchBoxInput = value;\n  }\n  // When the value in the UI is changed, this method will invoke a callback function\n  registerOnChange(fn: (value: string | undefined) => void): void {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  getSuggestions(eventValue: TypeEvent) {\n    const order = this.config.order ?? DEFAULT_ORDER;\n    let orderString = '';\n    order.forEach(preference => (orderString = `${orderString}${preference} `));\n\n    let saveInRecents = this.config.saveInRecents ?? DEFAULT_SAVE_IN_RECENTS;\n    if (this.config.saveInRecents && this.config.saveInRecentsOnlyOnEnter) {\n      if (\n        (eventValue.event instanceof KeyboardEvent &&\n          eventValue.event.key === 'Enter') ||\n        (eventValue.event instanceof Event &&\n          eventValue.event.type === 'change')\n      ) {\n        saveInRecents = true; // save in recents only on enter or change in category\n      } else {\n        // do not save in recent search on typing\n        saveInRecents = false;\n      }\n    }\n    /* need to put default value here and not in contructor\n    because sonar was giving code smell with definite assertion as all these parameters are optional */\n    const requestParameters: ISearchQuery = {\n      match: eventValue.input,\n      sources: this._categoryToSourceName(this.category),\n      limit: this.config.limit ?? DEFAULT_LIMIT,\n      limitByType: this.config.limitByType ?? DEFAULT_LIMIT_TYPE,\n      order: orderString,\n      offset: this.config.offset ?? DEFAULT_OFFSET,\n    };\n\n    this.searchService\n      .searchApiRequest(requestParameters, saveInRecents)\n      .subscribe(\n        (value: T[]) => {\n          this.suggestions = value;\n        },\n        (_error: Error) => {\n          this.suggestions = [];\n        },\n      );\n  }\n  getRecentSearches() {\n    if (\n      !this.config.hideRecentSearch &&\n      this.searchService.recentSearchApiRequest\n    ) {\n      this.searchService.recentSearchApiRequest().subscribe(\n        (value: ISearchQuery[]) => {\n          this.recentSearches = value;\n        },\n        (_error: Error) => {\n          this.recentSearches = [];\n        },\n      );\n    }\n  }\n\n  // event can be KeyBoardEvent or Event of type 'change' fired on change in value of drop down for category\n  hitSearchApi(event: Event) {\n    // this will happen only in case user searches something and then erases it, we need to update recent search\n    if (!this.searchBoxInput) {\n      this.suggestions = [];\n      this.getRecentSearches();\n      return;\n    }\n\n    // no debounce time needed in case of searchOnlyOnEnter\n    if (this.config.searchOnlyOnEnter) {\n      if (\n        (event instanceof KeyboardEvent && event.key === 'Enter') ||\n        (event instanceof Event && event.type === 'change')\n      ) {\n        this.getSuggestions({input: this.searchBoxInput, event});\n      }\n      return;\n    }\n\n    // no debounce time needed in case of change in category\n    if (event instanceof KeyboardEvent === false && event.type === 'change') {\n      this.getSuggestions({input: this.searchBoxInput, event});\n      return;\n    }\n\n    this.observableForSearchRequest.next({\n      input: this.searchBoxInput,\n      event,\n    });\n  }\n\n  populateValue(suggestion: T, event: MouseEvent) {\n    const value = suggestion[\n      this.config.displayPropertyName\n    ] as unknown as string; // converted to string to assign value to searchBoxInput\n    this.searchBoxInput = value;\n    this.suggestionsDisplay = false;\n    // ngModelChange doesn't detect change in value when populated from outside, hence calling manually\n    this.onChange(this.searchBoxInput);\n    // need to do this to show more search options for selected suggestion - just in case user reopens search input\n    this.getSuggestions({input: this.searchBoxInput, event});\n    this.clicked.emit({item: suggestion, event});\n  }\n  populateValueRecentSearch(recentSearch: ISearchQuery, event: MouseEvent) {\n    event.stopPropagation();\n    event.preventDefault();\n    const value = recentSearch['match'];\n    this.searchBoxInput = value;\n    this.suggestionsDisplay = false;\n    this.onChange(this.searchBoxInput);\n    // need to do this to show more search options for selected suggestion - just in case user reopens search input\n    this.getSuggestions({input: this.searchBoxInput, event});\n    this.focusInput();\n    this.showSuggestions();\n  }\n\n  fetchModelImageUrlFromSuggestion(suggestion: T) {\n    const modelName = suggestion[\n      'source' as unknown as keyof T\n    ] as unknown as string;\n    let url: string | undefined;\n    this.config.models.forEach((model, i) => {\n      if (model.name === modelName && model.imageUrl) {\n        url = model.imageUrl;\n      }\n    });\n    return url;\n  }\n\n  // also returns true if there are any suggestions related to the model\n  getSuggestionsFromModelName(modelName: string) {\n    this.relevantSuggestions = [];\n    this.suggestions.forEach(suggestion => {\n      const sourceModelName = suggestion[\n        'source' as keyof T\n      ] as unknown as string;\n      if (sourceModelName === modelName) {\n        this.relevantSuggestions.push(suggestion);\n      }\n    });\n    if (this.relevantSuggestions.length) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  boldString(str: T[keyof T] | string, substr: string) {\n    const strRegExp = new RegExp(`(${substr})`, 'gi');\n    const stringToMakeBold: string = str as unknown as string;\n    return stringToMakeBold.replace(strRegExp, `<b>$1</b>`);\n  }\n\n  hideSuggestions() {\n    this.suggestionsDisplay = false;\n    this.onTouched();\n  }\n\n  showSuggestions() {\n    this.suggestionsDisplay = true;\n    this.getRecentSearches();\n  }\n\n  focusInput() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.searchInputElement.nativeElement.focus();\n    }\n  }\n\n  setCategory(category: 'All' | IModel, event: MouseEvent) {\n    this.category = category;\n    this.categoryDisplay = false;\n    if (this.searchBoxInput) {\n      this.hitSearchApi(event);\n      this.focusInput();\n      this.showSuggestions();\n    }\n  }\n\n  showCategory() {\n    this.categoryDisplay = !this.categoryDisplay;\n  }\n\n  hideCategory() {\n    this.categoryDisplay = false;\n  }\n\n  resetInput() {\n    this.searchBoxInput = '';\n    this.suggestionsDisplay = true;\n    this.focusInput();\n    // ngModelChange doesn't detect change in value when populated from outside, hence calling manually\n    this.onChange(this.searchBoxInput);\n    this.getRecentSearches();\n  }\n  ngOnDestroy() {\n    this.observableForSearchRequest.unsubscribe();\n  }\n\n  _categoryToSourceName(category: 'All' | IModel) {\n    if (category === 'All') {\n      return [];\n    } else {\n      return [category.name];\n    }\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {SearchComponent} from './search/search.component';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {HttpClientModule} from '@angular/common/http';\n\n@NgModule({\n  declarations: [SearchComponent],\n  imports: [CommonModule, FormsModule, HttpClientModule],\n  exports: [SearchComponent],\n})\nexport class SearchLibModule {}\n","import {IDefaultReturnType, IModel} from './types';\nexport class Configuration<T = IDefaultReturnType> {\n  /** property to be displayed in the results */\n  displayPropertyName: keyof T;\n  /** list of model configuration to be render and categorize search results */\n  models: IModel[];\n  /** max number of results (based on limitByType option) */\n  limit?: number;\n  /** apply limit on individual models, or on overall results */\n  limitByType?: boolean;\n  /** apply a particular ordering on results */\n  order?: string[];\n  /** offset for results in case limit is used */\n  offset?: number;\n  /** save the search query in recent history */\n  saveInRecents?: boolean;\n  /** a placeholder to display in the search box */\n  placeholder?: string;\n  /** categorize results on the basis of models provided */\n  categorizeResults?: boolean;\n  /** hides the recent search list */\n  hideRecentSearch?: boolean;\n  /** hide the category selection button */\n  hideCategorizeButton?: boolean;\n  /** save value in recent search only on enter or change in category, if false, also saved on typing */\n  saveInRecentsOnlyOnEnter?: boolean;\n  /** search only on enter key or when category is changed */\n  searchOnlyOnEnter?: boolean;\n\n  constructor(d: Configuration<T>) {\n    if (\n      d.categorizeResults === false &&\n      (d.hideCategorizeButton === false || d.hideCategorizeButton === undefined)\n    ) {\n      throw new Error(\n        'You must provide hideCategorizeButton:true as categorizeResults is false',\n      );\n    }\n    if (d.saveInRecents === false && d.saveInRecentsOnlyOnEnter === true) {\n      throw new Error(\n        'You must provide saveInRecents:true for saveInRecentsOnlyOnEnter:true',\n      );\n    }\n    this.displayPropertyName = d.displayPropertyName;\n    this.models = d.models;\n\n    this.placeholder = d.placeholder ?? 'Search';\n    /* IRequestParameters - will be given default values before call is made in case undefined/null,\n    otherwise there ! is used on which sonar gives code smell */\n    this.limit = d.limit;\n    this.limitByType = d.limitByType;\n    this.order = d.order;\n    this.offset = d.offset;\n    this.saveInRecents = d.saveInRecents;\n\n    this.categorizeResults = d.categorizeResults ?? true;\n    this.hideRecentSearch = d.hideRecentSearch ?? false;\n    this.hideCategorizeButton = d.hideCategorizeButton ?? false;\n    this.saveInRecentsOnlyOnEnter = d.saveInRecentsOnlyOnEnter ?? false;\n    this.searchOnlyOnEnter = d.searchOnlyOnEnter ?? false;\n  }\n}\n","/*\n * Public API Surface of my-lib\n */\n\nexport * from './lib/search-lib.module';\nexport * from './lib/search/search.component';\nexport * from './lib/lib-configuration';\nexport * from './lib/types';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["InjectionToken","Subject","EventEmitter","tap","debounceTime","isPlatformBrowser","Component","NG_VALUE_ACCESSOR","Inject","PLATFORM_ID","Input","Output","ViewChild","NgModule","CommonModule","FormsModule","HttpClientModule"],"mappings":"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"}